{
  "title": "Docker Optimization Context - Universal AI Tools",
  "created": "2025-08-24",
  "status": "production-validated",
  "priority": "high",
  "summary": "Comprehensive Docker cleanup guide with 11.8GB space recovery and service resolution patterns",
  "key_results": {
    "space_freed": "11.8GB",
    "volume_reduction": "48% (31→15 volumes)", 
    "network_consolidation": "7→2-3 networks",
    "efficiency_gain": "40-50% Docker footprint reduction"
  },
  "critical_findings": {
    "dspy_service_resolution": {
      "issue": "Process termination, not port binding",
      "solution": "Restart with proper environment variables",
      "testing_note": "WebSocket services need different approach than HTTP"
    },
    "safe_removal_patterns": [
      "Dangling/untagged images",
      "Unused build cache",
      "Stopped container volumes",
      "Duplicate Ollama images (if using external)",
      "Archon service images (if unused)"
    ]
  },
  "proven_safe_commands": {
    "image_cleanup": [
      "docker image prune -f",
      "docker rmi <specific-unused-image>"
    ],
    "volume_cleanup": [
      "docker volume prune -f"
    ],
    "cache_cleanup": [
      "docker builder prune -f",
      "docker system prune -f"
    ],
    "always_verify_first": [
      "docker ps",
      "docker system df",
      "docker images"
    ]
  },
  "never_remove": [
    "public.ecr.aws/supabase/* (entire Supabase stack)",
    "postgres, neo4j, redis, qdrant (core databases)",
    "grafana, prometheus, jaeger (monitoring)",
    "moby/buildkit (build tools)",
    "Images from running containers"
  ],
  "maintenance_schedule": {
    "weekly": ["docker container prune -f", "docker image prune -f"],
    "monthly": ["docker volume prune -f (verify first)", "docker network prune -f"],
    "quarterly": ["Full system review", "Network consolidation", "Service audit"]
  },
  "common_pitfalls": [
    "Don't remove images from running containers",
    "Always check docker ps before cleanup", 
    "Ollama Docker image often redundant with external Ollama",
    "WebSocket services need special testing approach",
    "Verify service functionality after cleanup"
  ],
  "performance_impact": {
    "measured_benefits": [
      "Faster Docker operations",
      "Reduced disk I/O pressure", 
      "Lower Docker daemon memory usage",
      "Improved build speeds"
    ]
  }
}