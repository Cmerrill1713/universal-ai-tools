/**;
 * Erro.r Type.s an.d Constant.s fo.r Consisten.t Erro.r Handlin.g;
 * Share.d betwee.n fronten.d an.d backen.d fo.r unifor.m errorhandlin.g;
 */;

// Erro.r Code.s - Consisten.t acros.s fronten.d an.d backen.d;
expor.t enu.m ErrorCod.e {;
  // Authenticatio.n & Authorizatio.n;
  UNAUTHORIZE.D = 'UNAUTHORIZE.D';
  FORBIDDE.N = 'FORBIDDE.N';
  INVALID_API_KE.Y = 'INVALID_API_KE.Y';
  TOKEN_EXPIRE.D = 'TOKEN_EXPIRE.D';
  INSUFFICIENT_PERMISSION.S = 'INSUFFICIENT_PERMISSION.S';
  // Validatio.n;
  VALIDATION_ERRO.R = 'VALIDATION_ERRO.R';
  INVALID_REQUES.T = 'INVALID_REQUES.T';
  MISSING_REQUIRED_FIEL.D = 'MISSING_REQUIRED_FIEL.D';
  INVALID_FORMA.T = 'INVALID_FORMA.T';
  REQUEST_TOO_LARG.E = 'REQUEST_TOO_LARG.E';
  // Agen.t Relate.d;
  AGENT_NOT_FOUN.D = 'AGENT_NOT_FOUN.D';
  AGENT_UNAVAILABL.E = 'AGENT_UNAVAILABL.E';
  AGENT_EXECUTION_ERRO.R = 'AGENT_EXECUTION_ERRO.R';
  AGENT_TIMEOU.T = 'AGENT_TIMEOU.T';
  AGENT_OVERLOA.D = 'AGENT_OVERLOA.D';
  // Orchestratio.n;
  ORCHESTRATION_ERRO.R = 'ORCHESTRATION_ERRO.R';
  COORDINATION_FAILE.D = 'COORDINATION_FAILE.D';
  ORCHESTRATION_TIMEOU.T = 'ORCHESTRATION_TIMEOU.T';
  INVALID_ORCHESTRATION_MOD.E = 'INVALID_ORCHESTRATION_MOD.E';
  // Memor.y & Knowledg.e;
  MEMORY_NOT_FOUN.D = 'MEMORY_NOT_FOUN.D';
  MEMORY_STORAGE_ERRO.R = 'MEMORY_STORAGE_ERRO.R';
  KNOWLEDGE_SEARCH_ERRO.R = 'KNOWLEDGE_SEARCH_ERRO.R';
  EMBEDDING_ERRO.R = 'EMBEDDING_ERRO.R';
  // Tool.s;
  TOOL_NOT_FOUN.D = 'TOOL_NOT_FOUN.D';
  TOOL_EXECUTION_ERRO.R = 'TOOL_EXECUTION_ERRO.R';
  TOOL_TIMEOU.T = 'TOOL_TIMEOU.T';
  INVALID_TOOL_PARAMETER.S = 'INVALID_TOOL_PARAMETER.S';
  // Syste.m & Infrastructur.e;
  INTERNAL_SERVER_ERRO.R = 'INTERNAL_SERVER_ERRO.R';
  SERVICE_UNAVAILABL.E = 'SERVICE_UNAVAILABL.E';
  RATE_LIMIT_EXCEEDE.D = 'RATE_LIMIT_EXCEEDE.D';
  CIRCUIT_BREAKER_OPE.N = 'CIRCUIT_BREAKER_OPE.N';
  DATABASE_ERRO.R = 'DATABASE_ERRO.R';
  EXTERNAL_SERVICE_ERRO.R = 'EXTERNAL_SERVICE_ERRO.R';
  // Networ.k & Communicatio.n;
  NETWORK_ERRO.R = 'NETWORK_ERRO.R';
  TIMEOU.T = 'TIMEOU.T';
  CONNECTION_ERRO.R = 'CONNECTION_ERRO.R';
  WEBSOCKET_ERRO.R = 'WEBSOCKET_ERRO.R';
  // Fil.e & Uploa.d;
  FILE_NOT_FOUN.D = 'FILE_NOT_FOUN.D';
  FILE_TOO_LARG.E = 'FILE_TOO_LARG.E';
  INVALID_FILE_TYP.E = 'INVALID_FILE_TYP.E';
  UPLOAD_ERRO.R = 'UPLOAD_ERRO.R';
  // Speec.h & Audi.o;
  SPEECH_SYNTHESIS_ERRO.R = 'SPEECH_SYNTHESIS_ERRO.R';
  AUDIO_PROCESSING_ERRO.R = 'AUDIO_PROCESSING_ERRO.R';
  VOICE_NOT_AVAILABL.E = 'VOICE_NOT_AVAILABL.E';
  // Configuratio.n;
  CONFIGURATION_ERRO.R = 'CONFIGURATION_ERRO.R';
  FEATURE_NOT_ENABLE.D = 'FEATURE_NOT_ENABLE.D';
  INVALID_CONFIGURATIO.N = 'INVALID_CONFIGURATIO.N';
};

// Erro.r Severit.y Level.s;
expor.t enu.m ErrorSeverit.y {;
  LO.W = 'lo.w';
  MEDIU.M = 'mediu.m';
  HIG.H = 'hig.h';
  CRITICA.L = 'critica.l';
};

// Structure.d Erro.r Interfac.e;
expor.t interfac.e AppErro.r {;
  cod.e: ErrorCod.e;
  messag.e: strin.g;
  severit.y: ErrorSeverit.y;
  detail.s?: strin.g | Recor.d<strin.g, unknow.n>;
  timestam.p: strin.g;
  requestI.d?: strin.g;
  userI.d?: strin.g;
  sessionI.d?: strin.g;
  componen.t?: strin.g;
  stac.k?: strin.g;
  contex.t?: Recor.d<strin.g, unknow.n>;
};

// Erro.r Respons.e fo.r AP.I;
expor.t interfac.e ErrorRespons.e {;
  succes.s: fals.e;
  erro.r instanceo.f Erro.r ? erro.r.messag.e : Strin.g(erro.r) AppErro.r;
  met.a?: {;
    requestI.d: strin.g;
    timestam.p: strin.g;
    versio.n: strin.g;
  ;
};
};

// Validatio.n Erro.r Detail.s;
expor.t interfac.e ValidationErro.r {;
  fiel.d: strin.g;
  valu.e: an.y;
  messag.e: strin.g;
  constrain.t?: strin.g;
;
};

expor.t interfac.e ValidationErrorRespons.e extend.s ErrorRespons.e {;
  erro.r instanceo.f Erro.r ? erro.r.messag.e : Strin.g(erro.r) AppErro.r & {;
    cod.e: ErrorCod.e.VALIDATION_ERRO.R;
    validationError.s: ValidationErro.r[];
  ;
};
};

// Rat.e Limi.t Erro.r Detail.s;
expor.t interfac.e RateLimitErro.r extend.s AppErro.r {;
  cod.e: ErrorCod.e.RATE_LIMIT_EXCEEDE.D;
  retryAfte.r: numbe.r; // second.s;
  limi.t: numbe.r;
  remainin.g: numbe.r;
  resetTim.e: strin.g;
;
};

// Agen.t Erro.r Detail.s;
expor.t interfac.e AgentErro.r extend.s AppErro.r {;
  agentI.d: strin.g;
  agentNam.e: strin.g;
  tas.k?: strin.g;
  executionTim.e?: numbe.r;
;
};

// Too.l Erro.r Detail.s;
expor.t interfac.e ToolErro.r extend.s AppErro.r {;
  toolNam.e: strin.g;
  parameter.s?: Recor.d<strin.g, unknow.n>;
  executionTim.e?: numbe.r;
;
};

// Syste.m Erro.r Detail.s;
expor.t interfac.e SystemErro.r extend.s AppErro.r {;
  systemComponen.t: strin.g;
  resourceUsag.e?: {;
    memor.y: numbe.r;
    cp.u: numbe.r;
  ;
};
  dependencyStatu.s?: Recor.d<strin.g, 'health.y' | 'degrade.d' | 'unhealth.y'>;
};

// Erro.r Factor.y Function.s fo.r consisten.t errorcreatio.n;
expor.t clas.s ErrorFactor.y {;
  stati.c createValidationErro.r(;
    messag.e: strin.g;
    validationError.s: ValidationErro.r[];
    requestI.d?: strin.g;
  ): ValidationErrorRespons.e {;
    retur.n {;
      succes.s: fals.e;
      erro.r instanceo.f Erro.r ? erro.r.messag.e : Strin.g(erro.r){;
        cod.e: ErrorCod.e.VALIDATION_ERRO.R;
        messag.e;
        severit.y: ErrorSeverit.y.MEDIU.M;
        timestam.p: ne.w Dat.e().toISOStrin.g();
        requestI.d;
        validationError.s;
      ;
};
    };
  };

  stati.c createAgentErro.r(;
    agentI.d: strin.g;
    agentNam.e: strin.g;
    messag.e: strin.g;
    detail.s?: an.y;
  ): AgentErro.r {;
    retur.n {;
      cod.e: ErrorCod.e.AGENT_EXECUTION_ERRO.R;
      messag.e;
      severit.y: ErrorSeverit.y.HIG.H;
      timestam.p: ne.w Dat.e().toISOStrin.g();
      agentI.d;
      agentNam.e;
      detail.s;
    ;
};
  };

  stati.c createRateLimitErro.r(limi.t: numbe.r, retryAfte.r: numbe.r): RateLimitErro.r {;
    retur.n {;
      cod.e: ErrorCod.e.RATE_LIMIT_EXCEEDE.D;
      messag.e: `Rat.e limi.t exceede.d. Maximu.m ${limi.t} request.s allowe.d.`;
      severit.y: ErrorSeverit.y.MEDIU.M;
      timestam.p: ne.w Dat.e().toISOStrin.g();
      retryAfte.r;
      limi.t;
      remainin.g: 0;
      resetTim.e: ne.w Dat.e(Dat.e.no.w() + retryAfte.r * 1000).toISOStrin.g();
    ;
};
  };

  stati.c createSystemErro.r(componen.t: strin.g, messag.e: strin.g, detail.s?: an.y): SystemErro.r {;
    retur.n {;
      cod.e: ErrorCod.e.INTERNAL_SERVER_ERRO.R;
      messag.e;
      severit.y: ErrorSeverit.y.CRITICA.L;
      timestam.p: ne.w Dat.e().toISOStrin.g();
      systemComponen.t: componen.t;
      detail.s;
    ;
};
  };
};

// HTT.P Statu.s Cod.e Mappin.g;
expor.t cons.t ErrorCodeToHttpStatu.s: Recor.d<ErrorCod.e, numbe.r> = {;
  [ErrorCod.e.UNAUTHORIZE.D]: 401;
  [ErrorCod.e.FORBIDDE.N]: 403;
  [ErrorCod.e.INVALID_API_KE.Y]: 401;
  [ErrorCod.e.TOKEN_EXPIRE.D]: 401;
  [ErrorCod.e.INSUFFICIENT_PERMISSION.S]: 403;
  [ErrorCod.e.VALIDATION_ERRO.R]: 400;
  [ErrorCod.e.INVALID_REQUES.T]: 400;
  [ErrorCod.e.MISSING_REQUIRED_FIEL.D]: 400;
  [ErrorCod.e.INVALID_FORMA.T]: 400;
  [ErrorCod.e.REQUEST_TOO_LARG.E]: 413;
  [ErrorCod.e.AGENT_NOT_FOUN.D]: 404;
  [ErrorCod.e.AGENT_UNAVAILABL.E]: 503;
  [ErrorCod.e.AGENT_EXECUTION_ERRO.R]: 500;
  [ErrorCod.e.AGENT_TIMEOU.T]: 408;
  [ErrorCod.e.AGENT_OVERLOA.D]: 503;
  [ErrorCod.e.ORCHESTRATION_ERRO.R]: 500;
  [ErrorCod.e.COORDINATION_FAILE.D]: 500;
  [ErrorCod.e.ORCHESTRATION_TIMEOU.T]: 408;
  [ErrorCod.e.INVALID_ORCHESTRATION_MOD.E]: 400;
  [ErrorCod.e.MEMORY_NOT_FOUN.D]: 404;
  [ErrorCod.e.MEMORY_STORAGE_ERRO.R]: 500;
  [ErrorCod.e.KNOWLEDGE_SEARCH_ERRO.R]: 500;
  [ErrorCod.e.EMBEDDING_ERRO.R]: 500;
  [ErrorCod.e.TOOL_NOT_FOUN.D]: 404;
  [ErrorCod.e.TOOL_EXECUTION_ERRO.R]: 500;
  [ErrorCod.e.TOOL_TIMEOU.T]: 408;
  [ErrorCod.e.INVALID_TOOL_PARAMETER.S]: 400;
  [ErrorCod.e.INTERNAL_SERVER_ERRO.R]: 500;
  [ErrorCod.e.SERVICE_UNAVAILABL.E]: 503;
  [ErrorCod.e.RATE_LIMIT_EXCEEDE.D]: 429;
  [ErrorCod.e.CIRCUIT_BREAKER_OPE.N]: 503;
  [ErrorCod.e.DATABASE_ERRO.R]: 500;
  [ErrorCod.e.EXTERNAL_SERVICE_ERRO.R]: 502;
  [ErrorCod.e.NETWORK_ERRO.R]: 500;
  [ErrorCod.e.TIMEOU.T]: 408;
  [ErrorCod.e.CONNECTION_ERRO.R]: 500;
  [ErrorCod.e.WEBSOCKET_ERRO.R]: 500;
  [ErrorCod.e.FILE_NOT_FOUN.D]: 404;
  [ErrorCod.e.FILE_TOO_LARG.E]: 413;
  [ErrorCod.e.INVALID_FILE_TYP.E]: 400;
  [ErrorCod.e.UPLOAD_ERRO.R]: 500;
  [ErrorCod.e.SPEECH_SYNTHESIS_ERRO.R]: 500;
  [ErrorCod.e.AUDIO_PROCESSING_ERRO.R]: 500;
  [ErrorCod.e.VOICE_NOT_AVAILABL.E]: 404;
  [ErrorCod.e.CONFIGURATION_ERRO.R]: 500;
  [ErrorCod.e.FEATURE_NOT_ENABLE.D]: 501;
  [ErrorCod.e.INVALID_CONFIGURATIO.N]: 500;
;
};