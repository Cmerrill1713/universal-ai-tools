{
  "backends": {
    "ollama": {
      "enabled": true,
      "endpoint": "http://localhost:11434",
      "type": "local",
      "priority": 1,
      "autoDiscoverModels": true,
      "discoverEndpoint": "/api/tags",
      "modelClassification": {
        "bySize": {
          "tiny": {
            "maxParams": "1B",
            "contextLength": 4096,
            "maxTokens": 512,
            "useCase": ["routing", "simple_tasks", "fast_responses"],
            "tier": "small"
          },
          "small": {
            "maxParams": "3B", 
            "contextLength": 8192,
            "maxTokens": 1024,
            "useCase": ["general", "coding", "reasoning"],
            "tier": "small"
          },
          "medium": {
            "maxParams": "8B",
            "contextLength": 16384, 
            "maxTokens": 2048,
            "useCase": ["complex_reasoning", "analysis", "coding"],
            "tier": "medium"
          },
          "large": {
            "maxParams": "30B",
            "contextLength": 32768,
            "maxTokens": 4096,
            "useCase": ["expert_tasks", "research", "complex_analysis"],
            "tier": "large"
          },
          "xlarge": {
            "maxParams": "70B+",
            "contextLength": 65536,
            "maxTokens": 8192,
            "useCase": ["enterprise", "research", "expert_reasoning"],
            "tier": "large"
          }
        },
        "byCapability": {
          "vision": {
            "identifiers": ["llava", "clip", "vision"],
            "multimodal": true,
            "contextLength": 4096,
            "maxTokens": 1024,
            "useCase": ["image_analysis", "multimodal", "vision"]
          },
          "code": {
            "identifiers": ["code", "coder", "deepseek", "starcoder"],
            "specialization": "programming",
            "contextLength": 16384,
            "maxTokens": 4096,
            "useCase": ["code_generation", "debugging", "analysis"]
          },
          "reasoning": {
            "identifiers": ["llama", "qwen", "mixtral", "reasoning"],
            "specialization": "analysis", 
            "contextLength": 32768,
            "maxTokens": 4096,
            "useCase": ["reasoning", "analysis", "research"]
          },
          "embedding": {
            "identifiers": ["embed", "bge", "nomic", "arctic"],
            "outputType": "embeddings",
            "contextLength": 8192,
            "maxTokens": 1,
            "useCase": ["embeddings", "similarity", "search"]
          },
          "multilingual": {
            "identifiers": ["qwen", "multilingual", "polyglot"],
            "specialization": "languages",
            "contextLength": 32768,
            "maxTokens": 3072,
            "useCase": ["translation", "multilingual", "international"]
          }
        },
        "byFamily": {
          "llama": {
            "baseCapabilities": ["reasoning", "general", "coding"],
            "strengthMultiplier": 1.0
          },
          "qwen": {
            "baseCapabilities": ["multilingual", "coding", "math"],
            "strengthMultiplier": 1.1
          },
          "gemma": {
            "baseCapabilities": ["fast_inference", "efficiency"],
            "strengthMultiplier": 0.9
          },
          "deepseek": {
            "baseCapabilities": ["reasoning", "research", "analysis"],
            "strengthMultiplier": 1.15
          },
          "phi": {
            "baseCapabilities": ["reasoning", "small_model"],
            "strengthMultiplier": 0.8
          }
        }
      },
      "defaultParameters": {
        "temperature": 0.7,
        "repeat_penalty": 1.1,
        "top_k": 40,
        "top_p": 0.9,
        "stop": []
      },
      "adaptiveParameters": {
        "byComplexity": {
          "simple": {"temperature": 0.3, "top_p": 0.8},
          "medium": {"temperature": 0.7, "top_p": 0.9},
          "complex": {"temperature": 0.8, "top_p": 0.95},
          "creative": {"temperature": 1.0, "top_p": 0.95}
        },
        "byUseCase": {
          "factual": {"temperature": 0.1, "repeat_penalty": 1.05},
          "creative": {"temperature": 0.9, "repeat_penalty": 1.0},
          "code": {"temperature": 0.2, "repeat_penalty": 1.1},
          "analysis": {"temperature": 0.6, "repeat_penalty": 1.05}
        }
      }
    },
    "lm_studio": {
      "enabled": true,
      "endpoint": "http://localhost:5901/v1",
      "type": "local",
      "priority": 2,
      "autoDiscoverModels": true,
      "discoverEndpoint": "/models",
      "openaiCompatible": true,
      "modelClassification": {
        "bySize": {
          "medium": {"contextLength": 16384, "maxTokens": 2048},
          "large": {"contextLength": 32768, "maxTokens": 4096},
          "xlarge": {"contextLength": 65536, "maxTokens": 8192}
        },
        "byCapability": {
          "general": {"useCase": ["general", "conversation", "assistance"]},
          "expert": {"useCase": ["research", "analysis", "expert_tasks"]}
        }
      },
      "defaultParameters": {
        "temperature": 0.7,
        "top_p": 0.9,
        "frequency_penalty": 0.1,
        "presence_penalty": 0.1,
        "stop": []
      }
    },
    "mlx": {
      "enabled": true,
      "endpoint": "http://localhost:8002",
      "type": "local",
      "priority": 1,
      "appleOptimized": true,
      "adaptiveComputationTime": true,
      "autoDiscoverModels": false,
      "staticModels": {
        "hrm-adaptive": {
          "contextLength": 8192,
          "maxOutputTokens": 512,
          "optimalTokens": 256,
          "useCase": ["adaptive_reasoning", "cost_effective", "apple_silicon"],
          "adaptiveSteps": "2-16",
          "costAdvantage": "95%+",
          "tier": "small"
        }
      },
      "defaultParameters": {
        "temperature": 0.7,
        "adaptive_computation": true,
        "max_tokens": 512
      }
    },
    "candle": {
      "enabled": false,
      "endpoint": "http://localhost:8001",
      "type": "local",
      "priority": 3,
      "rustOptimized": true,
      "autoDiscoverModels": true,
      "experimental": true,
      "modelClassification": {
        "bySize": {
          "small": {"contextLength": 4096, "maxTokens": 1024},
          "medium": {"contextLength": 8192, "maxTokens": 2048}
        }
      },
      "defaultParameters": {
        "temperature": 0.7,
        "top_p": 0.9,
        "repeat_penalty": 1.1
      }
    }
  },
  "routing": {
    "strategy": "dynamic_classification",
    "fallbackChain": ["ollama", "lm_studio", "mlx"],
    "taskRouting": {
      "simple": {
        "preferredTiers": ["small"],
        "maxTokens": 1024,
        "backends": ["ollama", "mlx"]
      },
      "medium": {
        "preferredTiers": ["small", "medium"],
        "maxTokens": 2048,
        "backends": ["ollama", "lm_studio"]
      },
      "complex": {
        "preferredTiers": ["medium", "large"],
        "maxTokens": 4096,
        "backends": ["ollama", "lm_studio"]
      },
      "expert": {
        "preferredTiers": ["large", "xlarge"],
        "maxTokens": 8192,
        "backends": ["lm_studio", "ollama"]
      },
      "vision": {
        "requiresCapability": "vision",
        "maxTokens": 1024,
        "backends": ["ollama"]
      },
      "code": {
        "preferredCapabilities": ["code"],
        "maxTokens": 4096,
        "backends": ["ollama", "lm_studio"]
      },
      "creative": {
        "preferredCapabilities": ["reasoning"],
        "adaptiveParameters": "creative",
        "maxTokens": 3072,
        "backends": ["lm_studio", "ollama"]
      },
      "factual": {
        "adaptiveParameters": "factual", 
        "rewardBias": "accuracy",
        "maxTokens": 2048,
        "backends": ["ollama", "lm_studio"]
      }
    }
  },
  "discovery": {
    "refreshInterval": 300000,
    "cacheModels": true,
    "autoClassify": true,
    "fallbackClassification": {
      "sizePattern": {
        "1b|1B": "tiny",
        "3b|3B": "small", 
        "7b|7B|8b|8B": "medium",
        "13b|13B|14b|14B|20b|20B|30b|30B": "large",
        "70b|70B|\\d{3}b|\\d{3}B": "xlarge"
      },
      "capabilityPattern": {
        "llava|vision|clip": "vision",
        "code|coder|deepseek|starcoder": "code",
        "embed|bge|nomic|arctic": "embedding",
        "qwen.*multilingual|polyglot": "multilingual"
      },
      "familyPattern": {
        "llama": "llama",
        "qwen": "qwen", 
        "gemma": "gemma",
        "deepseek": "deepseek",
        "phi": "phi"
      }
    }
  },
  "performance": {
    "healthCheckInterval": 30000,
    "timeoutMs": 30000,
    "retryAttempts": 3,
    "loadBalancing": {
      "strategy": "weighted_round_robin",
      "enableFailover": true,
      "maxConcurrentRequests": 10,
      "weights": {
        "tier": {"small": 0.8, "medium": 1.0, "large": 1.2},
        "capability": {"vision": 1.3, "code": 1.1, "reasoning": 1.0}
      }
    },
    "caching": {
      "enabled": true,
      "ttlSeconds": 300,
      "maxCacheSize": 1000
    }
  },
  "optimization": {
    "contextWindowOptimization": true,
    "adaptiveTokenLimits": true,
    "performanceMonitoring": true,
    "automaticModelSelection": true,
    "dynamicParameterAdjustment": true,
    "rewardSystemIntegration": true,
    "intellectualHonestyBias": 0.2
  },
  "grading": {
    "rewardSystem": {
      "correct": 1,
      "uncertain": 0, 
      "wrong": -1
    },
    "intellectualHonestyReward": 0.1,
    "hallucinationPenalty": -0.3,
    "confidenceCalibrationWeight": 0.15
  }
}